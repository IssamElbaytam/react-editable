!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.Editable=t(require("React"),require("ReactDOM")):e.Editable=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o);t["default"]=i["default"],e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;l=c=u=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,i);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=a,r=!0}},c=n(2),f=r(c),s=n(3),d=r(s),p=n(4),g=r(p),v=function(){return null},Editable=function(e){function Editable(){var e=this;o(this,Editable),u(Object.getPrototypeOf(Editable.prototype),"constructor",this).apply(this,arguments),this._editor=null,this._lastHTML=null,this._emitChange=function(t,n){var r=e._editor.getHTML(),o=e.props[t];r!==e._lastHTML&&e.props.onChange(r),o&&o(n),e._lastHTML=r}}return i(Editable,e),l(Editable,[{key:"shouldComponentUpdate",value:function(e){return this.props.readOnly!==e.readOnly||this._editor.getHTML()!==e.html}},{key:"componentDidMount",value:function(){var e=this.props,t=e.html,n=e.readOnly,r=e.getEditor,o=d["default"].findDOMNode(this),i=this._handleSelection.bind(this);this._editor=g["default"]({element:o,onSelection:i,readOnly:n}),r(this._editor.setHTML(t))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.html,r=t.readOnly;this._editor.getHTML()!==n&&this._editor.setHTML(n),e.readOnly!==r&&this._editor.readOnly(r)}},{key:"_handleSelection",value:function(e,t,n,r){var o=this._editor.getHTML();this.props.onChange(o,n)}},{key:"render",value:function(){return f["default"].createElement(this.props.component,a({},this.props,{onBlur:this._emitChange.bind(null,"onBlur"),onInput:this._emitChange.bind(null,"onInput")}))}}],[{key:"propTypes",value:{component:c.PropTypes.string,html:c.PropTypes.string,readOnly:c.PropTypes.bool,getEditor:c.PropTypes.func,onChange:c.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{component:"div",html:"",readOnly:!1,getEditor:v,onChange:v},enumerable:!0}]),Editable}(f["default"].Component);t["default"]=Editable,e.exports=t["default"]},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){var r,o;!function(n){"use strict";r=[],o=function(){return n(window,document)}.apply(t,r),!(void 0!==o&&(e.exports=o))}(function(e,t){"use strict";var n=function(e,t,n){var r;return function(){if(r){if(!n)return;clearTimeout(r)}var o=this,i=arguments;r=setTimeout(function(){r=null,e.apply(o,i)},t)}},r=function(t,n,r,o){t.addEventListener?t.addEventListener(n,r,o?!0:!1):t.attachEvent?t.attachEvent("on"+n,r):t!=e&&(t["on"+n]=r)},o=function(t,n,r,o){t.removeEventListener?t.removeEventListener(n,r,o?!0:!1):t.detachEvent?t.detachEvent("on"+n,r):t!=e&&(t["on"+n]=null)},i=function(e,n,r,o){if(t.createEvent){var i=t.createEvent("Event");i.initEvent(n,void 0!==r?r:!0,void 0!==o?o:!1),e.dispatchEvent(i)}else if(t.createEventObject){var i=t.createEventObject();e.fireEvent("on"+n,i)}else"function"==typeof e["on"+n]&&e["on"+n]()},a=function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},l="undefined"!=typeof Node?Node.ELEMENT_NODE:1,u="undefined"!=typeof Node?Node.TEXT_NODE:3,c=function(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1},f=function(e,t){if(e.firstChild)return e.firstChild;for(;e;){if(e==t)return null;if(e.nextSibling)return e.nextSibling;e=e.parentNode}return null},s=function(n){if(e.getSelection){var r=e.getSelection();if(r.rangeCount>0)return r.getRangeAt(0)}else if(t.selection){var r=t.selection;return r.createRange()}return null},d=function(n,r){if(r)if(e.getSelection){var o=e.getSelection();o.removeAllRanges(),o.addRange(r)}else t.selection&&r.select()},p=function(){if(e.getSelection){var n=e.getSelection();if(!n.rangeCount)return!1;var r=n.getRangeAt(0).cloneRange();if(r.getBoundingClientRect){var o=r.getBoundingClientRect();if(o&&o.left&&o.top&&o.right&&o.bottom)return{left:parseInt(o.left),top:parseInt(o.top),width:parseInt(o.right-o.left),height:parseInt(o.bottom-o.top)};for(var i=r.getClientRects?r.getClientRects():[],a=0;a<i.length;++a){var o=i[a];if(o.left&&o.top&&o.right&&o.bottom)return{left:parseInt(o.left),top:parseInt(o.top),width:parseInt(o.right-o.left),height:parseInt(o.bottom-o.top)}}}}else if(t.selection){var n=t.selection;if("Control"!=n.type){var r=n.createRange();if(r.boundingLeft||r.boundingTop||r.boundingWidth||r.boundingHeight)return{left:r.boundingLeft,top:r.boundingTop,width:r.boundingWidth,height:r.boundingHeight}}}return!1},g=function(n){if(e.getSelection){var r=e.getSelection();return r.isCollapsed?!0:!1}if(t.selection){var r=t.selection;if("Text"==r.type){var o=t.selection.createRange(),i=t.body.createTextRange();return i.moveToElementText(n),i.setEndPoint("EndToStart",o),0==o.htmlText.length}if("Control"==r.type)return!1}return!0},v=function(n){if(e.getSelection){var r=e.getSelection();if(!r.rangeCount)return[];for(var o=[],i=0;i<r.rangeCount;++i)for(var a=r.getRangeAt(i),u=a.startContainer,s=a.endContainer;u;){if(u!=n){var d=!1;if(r.containsNode)d=r.containsNode(u,!0);else{var p=t.createRange();p.selectNodeContents(u);for(var i=0;i<r.rangeCount;++i){var a=r.getRangeAt(i);if(a.compareBoundaryPoints(a.END_TO_START,p)>=0&&a.compareBoundaryPoints(a.START_TO_END,p)<=0){d=!0;break}}}d&&o.push(u)}u=f(u,u==s?s:n)}return 0==o.length&&c(n,r.focusNode)&&r.focusNode!=n&&o.push(r.focusNode),o}if(t.selection){var r=t.selection;if("Text"==r.type){for(var o=[],g=r.createRangeCollection(),i=0;i<g.length;++i)for(var a=g[i],v=a.parentElement(),u=v;u;){var p=a.duplicate();if(p.moveToElementText(u.nodeType!=l?u.parentNode:u),p.compareEndPoints("EndToStart",a)>=0&&p.compareEndPoints("StartToEnd",a)<=0){for(var h=!1,m=0;m<o.length;++m)if(o[m]===u){h=!0;break}h||o.push(u)}u=f(u,v)}return 0==o.length&&c(n,t.activeElement)&&t.activeElement!=n&&o.push(t.activeElement),o}if("Control"==r.type){for(var o=[],a=r.createRange(),i=0;i<a.length;++i)o.push(a(i));return o}}return[]},h=function(){if(e.getSelection){var n=e.getSelection();if(!n.isCollapsed)try{n.collapseToEnd()}catch(r){}}else if(t.selection){var n=t.selection;if("Control"!=n.type){var o=n.createRange();o.collapse(!1),o.select()}}},m=function(n,r,o){if(e.getSelection){var i=e.getSelection();if(i.modify){for(var a=0;r>a;++a)i.modify("extend","backward","character");for(var a=0;o>a;++a)i.modify("extend","forward","character")}else{var l=i.getRangeAt(0);l.setStart(l.startContainer,l.startOffset-r),l.setEnd(l.endContainer,l.endOffset+o),i.removeAllRanges(),i.addRange(l)}}else if(t.selection){var i=t.selection;if("Control"!=i.type){var l=i.createRange();l.collapse(!0),l.moveStart("character",-r),l.moveEnd("character",o),l.select()}}},y=function(n){if(g(n))return null;if(e.getSelection){var r=e.getSelection();if(r.rangeCount){for(var o=t.createElement("div"),i=r.rangeCount,a=0;i>a;++a){var l=r.getRangeAt(a).cloneContents();o.appendChild(l)}return o.innerHTML}}else if(t.selection){var r=t.selection;if("Text"==r.type){var u=r.createRange();return u.htmlText}}return null},T=function(n,r){if(e.getSelection){var o=e.getSelection();if(c(n,o.anchorNode)&&c(n,o.focusNode))return!0;if(!r)return!1;var i=t.createRange();i.selectNodeContents(n),i.collapse(!1),o.removeAllRanges(),o.addRange(i)}else if(t.selection){var o=t.selection;if("Control"==o.type){var i=o.createRange();if(0!=i.length&&c(n,i(0)))return!0}else{var a=t.body.createTextRange();a.moveToElementText(n);var i=o.createRange();if(a.inRange(i))return!0}if(!r)return!1;var i=t.body.createTextRange();i.moveToElementText(n),i.setEndPoint("StartToEnd",i),i.select()}return!0},b=function(n,r){if(e.getSelection){var o=e.getSelection();if(o.getRangeAt&&o.rangeCount){var i=o.getRangeAt(0),a=t.createElement("div");a.innerHTML=r;for(var l,u,f=t.createDocumentFragment();l=a.firstChild;)u=f.appendChild(l);c(n,i.commonAncestorContainer)?(i.deleteContents(),i.insertNode(f)):n.appendChild(f),u&&(i=i.cloneRange(),i.setStartAfter(u),i.collapse(!0),o.removeAllRanges(),o.addRange(i))}}else if(t.selection){var o=t.selection;if("Control"!=o.type){var s=o.createRange();s.collapse(!0);var i=o.createRange();if(c(n,i.parentElement()))i.pasteHTML(r);else{var d=t.body.createTextRange();d.moveToElementText(n),d.collapse(!1),d.select(),d.pasteHTML(r)}i=o.createRange(),i.setEndPoint("StartToEnd",s),i.select()}}},C=function(C){C=C||{};var E=C.element||null;"string"==typeof E&&(E=t.getElementById(E));var R=C.onKeyDown||null,S=C.onKeyPress||null,O=C.onKeyUp||null,M=C.onSelection||null,L=C.onPlaceholder||null,x=C.onClosepopup||null,N=C.hijackContextmenu||!1,_="TEXTAREA"==E.nodeName||"INPUT"==E.nodeName;if(_){var P="contentEditable"in t.body;if(P){var H=navigator.userAgent.match(/(?:iPad|iPhone|Android).* AppleWebKit\/([^ ]+)/);H&&420<=parseInt(H[1])&&parseInt(H[1])<534&&(P=!1)}if(!P){var k=E,w=function(e){return e.replace(/<br[ \/]*>\n?/gi,"<br>\n")};k.value=w(k.value);var I=function(){return this},D=function(){return null};return{legacy:!0,getElement:function(){return k},getHTML:function(){return k.value},setHTML:function(e){return k.value=w(e),this},getSelectedHTML:D,sync:I,collapseSelection:I,expandSelection:I,openPopup:D,closePopup:I,removeFormat:I,bold:I,italic:I,underline:I,strikethrough:I,forecolor:I,highlight:I,fontName:I,fontSize:I,subscript:I,superscript:I,align:I,format:I,indent:I,insertLink:I,insertImage:I,insertHTML:I,insertList:I}}}var k=null,j=null;if(_){k=E,k.style.display="none",j=t.createElement("DIV"),j.innerHTML=k.value;var A=k.parentNode,B=k.nextSibling;B?A.insertBefore(j,B):A.appendChild(j)}else j=E;j.setAttribute("contentEditable","true");var K=t.all&&!t.addEventListener?t:e,X=null;if(_){var q=j.innerHTML;X=function(){var e=j.innerHTML;e!=q&&(k.value=e,q=e,i(k,"change",!1))}}var F;if(L){var W=!1;F=function(){for(var e=!0,t=j;t;)if(t=f(t,j)){if(t.nodeType==l){if("IMG"==t.nodeName){e=!1;break}}else if(t.nodeType==u){var n=t.nodeValue;if(n&&-1!=n.search(/[^\s]/)){e=!1;break}}}else;W!=e&&(L(e),W=e)},F()}var Y=null,U=null,V=null;M&&(U=function(t,n,r){var o=g(j),i=v(j),a=null===t||null===n?null:{left:t,top:n,width:0,height:0},u=p();if(u&&(a=u),a){if(j.getBoundingClientRect){var c=j.getBoundingClientRect();a.left-=parseInt(c.left),a.top-=parseInt(c.top)}else{var f=j,s=0,d=0,h=!1;do s+=f.offsetLeft?parseInt(f.offsetLeft):0,d+=f.offsetTop?parseInt(f.offsetTop):0,"fixed"==f.style.position&&(h=!0);while(f=f.offsetParent);a.left-=s-(h?0:e.pageXOffset),a.top-=d-(h?0:e.pageYOffset)}a.left<0&&(a.left=0),a.top<0&&(a.top=0),a.width>j.offsetWidth&&(a.width=j.offsetWidth),a.height>j.offsetHeight&&(a.height=j.offsetHeight)}else if(i.length)for(var m=0;m<i.length;++m){var f=i[m];if(f.nodeType==l){a={left:f.offsetLeft,top:f.offsetTop,width:f.offsetWidth,height:f.offsetHeight};break}}M(o,a,i,r)},V=n(U,1));var z=null,G=function(t){if(!t)var t=e.event;var n=t.target||t.srcElement;n.nodeType==u&&(n=n.parentNode),c(z,n)||Q()},J=function(){if(z)return z;r(K,"mousedown",G,!0),z=t.createElement("DIV");var e=j.parentNode,n=j.nextSibling;return n?e.insertBefore(z,n):e.appendChild(z),z},Q=function(){z&&(z.parentNode.removeChild(z),z=null,o(K,"mousedown",G,!0),x&&x())};r(j,"focus",function(){k&&i(k,"focus",!1)}),r(j,"blur",function(){X&&X(),k&&i(k,"blur",!1)});var Z=null;if(F||X){var $=X?n(X,250,!0):null,ee=function(e){F&&F(),$&&$()};Z=n(ee,1),r(j,"input",Z),r(j,"DOMNodeInserted",Z),r(j,"DOMNodeRemoved",Z),r(j,"DOMSubtreeModified",Z),r(j,"DOMCharacterDataModified",Z),r(j,"propertychange",Z),r(j,"textInput",Z),r(j,"paste",Z),r(j,"cut",Z),r(j,"drop",Z)}var te=function(t,n){if(!t)var t=e.event;var r=t.which||t.keyCode,o=String.fromCharCode(r||t.charCode),i=t.shiftKey||!1,l=t.altKey||!1,u=t.ctrlKey||!1,c=t.metaKey||!1;if(1==n){if(R&&R(r,o,i,l,u,c)===!1)return a(t)}else if(2==n){if(S&&S(r,o,i,l,u,c)===!1)return a(t)}else if(3==n&&O&&O(r,o,i,l,u,c)===!1)return a(t);if((2==n||3==n)&&(Y=null,V&&V(null,null,!1)),2==n&&Z)switch(r){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:break;default:Z()}};r(j,"keydown",function(e){return te(e,1)}),r(j,"keypress",function(e){return te(e,2)}),r(j,"keyup",function(e){return te(e,3)});var ne=function le(t,n){if(!t)var t=e.event;var r=null,i=null;t.clientX&&t.clientY?(r=t.clientX,i=t.clientY):t.pageX&&t.pageY&&(r=t.pageX-e.pageXOffset,i=t.pageY-e.pageYOffset),t.which&&3==t.which?n=!0:t.button&&2==t.button&&(n=!0),o(K,"mouseup",le),Y=null,(N||!n)&&V&&V(r,i,n)};r(j,"mousedown",function(e){o(K,"mouseup",ne),r(K,"mouseup",ne)}),r(j,"mouseup",function(e){ne(e),Z&&Z()}),r(j,"dblclick",function(e){ne(e)}),r(j,"selectionchange",function(e){ne(e)}),N&&r(j,"contextmenu",function(e){return ne(e,!0),a(e)});var re=function(n,r,o){if(d(j,Y),!T(j,o))return!1;if(e.getSelection)try{return t.queryCommandSupported&&!t.queryCommandSupported(n)?!1:t.execCommand(n,!1,r)}catch(i){}else if(t.selection){var a=t.selection;if("None"!=a.type){var l=a.createRange();try{return l.queryCommandEnabled(n)?l.execCommand(n,!1,r):!1}catch(i){}}}return!1},oe=null,ie=function(){(t.all||e.MSInputMethodContext)&&(oe=t.createElement("DIV"),j.appendChild(oe))},ae=function(e){oe&&(j.removeChild(oe),oe=null),Z&&Z(),e?(h(),Y=null):Y&&(Y=s(j))};return{getElement:function(){return j},getHTML:function(){return j.innerHTML},setHTML:function(e){return j.innerHTML=e,ae(!0),this},getSelectedHTML:function(){return d(j,Y),T(j)?y(j):null},sync:function(){return X&&X(),this},collapseSelection:function(){return h(),Y=null,this},expandSelection:function(e,t){return d(j,Y),T(j)?(m(j,e,t),Y=s(j),this):this},openPopup:function(){return Y||(Y=s(j)),J()},closePopup:function(){return Q(),this},removeFormat:function(){return re("removeFormat"),re("unlink"),ae(),this},bold:function(){return re("bold"),ae(),this},italic:function(){return re("italic"),ae(),this},underline:function(){return re("underline"),ae(),this},strikethrough:function(){return re("strikeThrough"),ae(),this},forecolor:function(e){return re("foreColor",e),ae(),this},highlight:function(e){return re("hiliteColor",e)||re("backColor",e),ae(),this},fontName:function(e){return re("fontName",e),ae(),this},fontSize:function(e){return re("fontSize",e),ae(),this},subscript:function(){return re("subscript"),ae(),this},superscript:function(){return re("superscript"),ae(),this},align:function(e){return ie(),"left"==e?re("justifyLeft"):"center"==e?re("justifyCenter"):"right"==e?re("justifyRight"):"justify"==e&&re("justifyFull"),ae(),this},format:function(e){return ie(),re("formatBlock",e),ae(),this},indent:function(e){return ie(),re(e?"outdent":"indent"),ae(),this},insertLink:function(e){return re("createLink",e),ae(!0),this},insertImage:function(e){return re("insertImage",e,!0),ae(!0),this},insertHTML:function(e){return re("insertHTML",e,!0)||(d(j,Y),T(j,!0),b(j,e)),ae(!0),this},insertList:function(e){return ie(),re(e?"insertOrderedList":"insertUnorderedList"),ae(),this}}};return C})}])});